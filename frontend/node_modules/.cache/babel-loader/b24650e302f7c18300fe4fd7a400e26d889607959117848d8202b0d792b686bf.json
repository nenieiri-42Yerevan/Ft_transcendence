{"ast":null,"code":"import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Vector3 } from 'three';\nimport Node from '../core/Node.js';\nimport UniformNode from '../core/UniformNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\nclass Object3DNode extends Node {\n  constructor() {\n    let scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object3DNode.VIEW_MATRIX;\n    let object3d = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    super();\n    this.scope = scope;\n    this.object3d = object3d;\n    this.updateType = NodeUpdateType.Object;\n    this._uniformNode = new UniformNode(null);\n  }\n  getNodeType() {\n    const scope = this.scope;\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      return 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      return 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      return 'vec3';\n    }\n  }\n  update(frame) {\n    const object = this.object3d !== null ? this.object3d : frame.object;\n    const uniformNode = this._uniformNode;\n    const camera = frame.camera;\n    const scope = this.scope;\n    if (scope === Object3DNode.VIEW_MATRIX) {\n      uniformNode.value = object.modelViewMatrix;\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      uniformNode.value = object.normalMatrix;\n    } else if (scope === Object3DNode.WORLD_MATRIX) {\n      uniformNode.value = object.matrixWorld;\n    } else if (scope === Object3DNode.POSITION) {\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n    } else if (scope === Object3DNode.VIEW_POSITION) {\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n      uniformNode.value.applyMatrix4(camera.matrixWorldInverse);\n    }\n  }\n  generate(builder) {\n    const scope = this.scope;\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      this._uniformNode.nodeType = 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      this._uniformNode.nodeType = 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      this._uniformNode.nodeType = 'vec3';\n      this._uniformNode.value = new Vector3();\n    }\n    return this._uniformNode.build(builder);\n  }\n  serialize(data) {\n    super.serialize(data);\n    data.scope = this.scope;\n  }\n  deserialize(data) {\n    super.deserialize(data);\n    this.scope = data.scope;\n  }\n}\n_defineProperty(Object3DNode, \"VIEW_MATRIX\", 'viewMatrix');\n_defineProperty(Object3DNode, \"NORMAL_MATRIX\", 'normalMatrix');\n_defineProperty(Object3DNode, \"WORLD_MATRIX\", 'worldMatrix');\n_defineProperty(Object3DNode, \"POSITION\", 'position');\n_defineProperty(Object3DNode, \"VIEW_POSITION\", 'viewPosition');\nexport default Object3DNode;","map":{"version":3,"names":["_defineProperty","Vector3","Node","UniformNode","NodeUpdateType","Object3DNode","constructor","scope","VIEW_MATRIX","object3d","updateType","Object","_uniformNode","getNodeType","WORLD_MATRIX","NORMAL_MATRIX","POSITION","VIEW_POSITION","update","frame","object","uniformNode","camera","value","modelViewMatrix","normalMatrix","matrixWorld","setFromMatrixPosition","applyMatrix4","matrixWorldInverse","generate","builder","nodeType","build","serialize","data","deserialize"],"sources":["/Users/tumolabsstudent/Desktop/app/node_modules/three-stdlib/nodes/accessors/Object3DNode.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Vector3 } from 'three';\nimport Node from '../core/Node.js';\nimport UniformNode from '../core/UniformNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\n\nclass Object3DNode extends Node {\n  constructor(scope = Object3DNode.VIEW_MATRIX, object3d = null) {\n    super();\n    this.scope = scope;\n    this.object3d = object3d;\n    this.updateType = NodeUpdateType.Object;\n    this._uniformNode = new UniformNode(null);\n  }\n\n  getNodeType() {\n    const scope = this.scope;\n\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      return 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      return 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      return 'vec3';\n    }\n  }\n\n  update(frame) {\n    const object = this.object3d !== null ? this.object3d : frame.object;\n    const uniformNode = this._uniformNode;\n    const camera = frame.camera;\n    const scope = this.scope;\n\n    if (scope === Object3DNode.VIEW_MATRIX) {\n      uniformNode.value = object.modelViewMatrix;\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      uniformNode.value = object.normalMatrix;\n    } else if (scope === Object3DNode.WORLD_MATRIX) {\n      uniformNode.value = object.matrixWorld;\n    } else if (scope === Object3DNode.POSITION) {\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n    } else if (scope === Object3DNode.VIEW_POSITION) {\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n      uniformNode.value.applyMatrix4(camera.matrixWorldInverse);\n    }\n  }\n\n  generate(builder) {\n    const scope = this.scope;\n\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      this._uniformNode.nodeType = 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      this._uniformNode.nodeType = 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      this._uniformNode.nodeType = 'vec3';\n      this._uniformNode.value = new Vector3();\n    }\n\n    return this._uniformNode.build(builder);\n  }\n\n  serialize(data) {\n    super.serialize(data);\n    data.scope = this.scope;\n  }\n\n  deserialize(data) {\n    super.deserialize(data);\n    this.scope = data.scope;\n  }\n\n}\n\n_defineProperty(Object3DNode, \"VIEW_MATRIX\", 'viewMatrix');\n\n_defineProperty(Object3DNode, \"NORMAL_MATRIX\", 'normalMatrix');\n\n_defineProperty(Object3DNode, \"WORLD_MATRIX\", 'worldMatrix');\n\n_defineProperty(Object3DNode, \"POSITION\", 'position');\n\n_defineProperty(Object3DNode, \"VIEW_POSITION\", 'viewPosition');\n\nexport default Object3DNode;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}