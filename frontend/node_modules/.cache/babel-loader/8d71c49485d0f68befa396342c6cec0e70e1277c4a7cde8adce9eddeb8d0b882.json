{"ast":null,"code":"import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport Node from '../core/Node.js';\nimport AttributeNode from '../core/AttributeNode.js';\nimport VaryNode from '../core/VaryNode.js';\nimport ModelNode from './ModelNode.js';\nimport MathNode from '../math/MathNode.js';\nimport OperatorNode from '../math/OperatorNode.js';\nclass PositionNode extends Node {\n  constructor() {\n    let scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : PositionNode.LOCAL;\n    super('vec3');\n    this.scope = scope;\n  }\n  getHash() {\n    return `position-${this.scope}`;\n  }\n  generate(builder) {\n    const scope = this.scope;\n    let outputNode = null;\n    if (scope === PositionNode.GEOMETRY) {\n      outputNode = new AttributeNode('position', 'vec3');\n    } else if (scope === PositionNode.LOCAL) {\n      outputNode = new VaryNode(new PositionNode(PositionNode.GEOMETRY));\n    } else if (scope === PositionNode.WORLD) {\n      const vertexPositionNode = new MathNode(MathNode.TRANSFORM_DIRECTION, new ModelNode(ModelNode.WORLD_MATRIX), new PositionNode(PositionNode.LOCAL));\n      outputNode = new VaryNode(vertexPositionNode);\n    } else if (scope === PositionNode.VIEW) {\n      const vertexPositionNode = new OperatorNode('*', new ModelNode(ModelNode.VIEW_MATRIX), new PositionNode(PositionNode.LOCAL));\n      outputNode = new VaryNode(vertexPositionNode);\n    } else if (scope === PositionNode.VIEW_DIRECTION) {\n      const vertexPositionNode = new MathNode(MathNode.NEGATE, new PositionNode(PositionNode.VIEW));\n      outputNode = new MathNode(MathNode.NORMALIZE, new VaryNode(vertexPositionNode));\n    }\n    return outputNode.build(builder, this.getNodeType(builder));\n  }\n  serialize(data) {\n    super.serialize(data);\n    data.scope = this.scope;\n  }\n  deserialize(data) {\n    super.deserialize(data);\n    this.scope = data.scope;\n  }\n}\n_defineProperty(PositionNode, \"GEOMETRY\", 'geometry');\n_defineProperty(PositionNode, \"LOCAL\", 'local');\n_defineProperty(PositionNode, \"WORLD\", 'world');\n_defineProperty(PositionNode, \"VIEW\", 'view');\n_defineProperty(PositionNode, \"VIEW_DIRECTION\", 'viewDirection');\nexport default PositionNode;","map":{"version":3,"names":["_defineProperty","Node","AttributeNode","VaryNode","ModelNode","MathNode","OperatorNode","PositionNode","constructor","scope","LOCAL","getHash","generate","builder","outputNode","GEOMETRY","WORLD","vertexPositionNode","TRANSFORM_DIRECTION","WORLD_MATRIX","VIEW","VIEW_MATRIX","VIEW_DIRECTION","NEGATE","NORMALIZE","build","getNodeType","serialize","data","deserialize"],"sources":["/Users/tumolabsstudent/Desktop/app/node_modules/three-stdlib/nodes/accessors/PositionNode.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport Node from '../core/Node.js';\nimport AttributeNode from '../core/AttributeNode.js';\nimport VaryNode from '../core/VaryNode.js';\nimport ModelNode from './ModelNode.js';\nimport MathNode from '../math/MathNode.js';\nimport OperatorNode from '../math/OperatorNode.js';\n\nclass PositionNode extends Node {\n  constructor(scope = PositionNode.LOCAL) {\n    super('vec3');\n    this.scope = scope;\n  }\n\n  getHash() {\n    return `position-${this.scope}`;\n  }\n\n  generate(builder) {\n    const scope = this.scope;\n    let outputNode = null;\n\n    if (scope === PositionNode.GEOMETRY) {\n      outputNode = new AttributeNode('position', 'vec3');\n    } else if (scope === PositionNode.LOCAL) {\n      outputNode = new VaryNode(new PositionNode(PositionNode.GEOMETRY));\n    } else if (scope === PositionNode.WORLD) {\n      const vertexPositionNode = new MathNode(MathNode.TRANSFORM_DIRECTION, new ModelNode(ModelNode.WORLD_MATRIX), new PositionNode(PositionNode.LOCAL));\n      outputNode = new VaryNode(vertexPositionNode);\n    } else if (scope === PositionNode.VIEW) {\n      const vertexPositionNode = new OperatorNode('*', new ModelNode(ModelNode.VIEW_MATRIX), new PositionNode(PositionNode.LOCAL));\n      outputNode = new VaryNode(vertexPositionNode);\n    } else if (scope === PositionNode.VIEW_DIRECTION) {\n      const vertexPositionNode = new MathNode(MathNode.NEGATE, new PositionNode(PositionNode.VIEW));\n      outputNode = new MathNode(MathNode.NORMALIZE, new VaryNode(vertexPositionNode));\n    }\n\n    return outputNode.build(builder, this.getNodeType(builder));\n  }\n\n  serialize(data) {\n    super.serialize(data);\n    data.scope = this.scope;\n  }\n\n  deserialize(data) {\n    super.deserialize(data);\n    this.scope = data.scope;\n  }\n\n}\n\n_defineProperty(PositionNode, \"GEOMETRY\", 'geometry');\n\n_defineProperty(PositionNode, \"LOCAL\", 'local');\n\n_defineProperty(PositionNode, \"WORLD\", 'world');\n\n_defineProperty(PositionNode, \"VIEW\", 'view');\n\n_defineProperty(PositionNode, \"VIEW_DIRECTION\", 'viewDirection');\n\nexport default PositionNode;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}