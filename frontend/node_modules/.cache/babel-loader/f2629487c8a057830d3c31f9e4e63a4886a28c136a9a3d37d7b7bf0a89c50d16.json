{"ast":null,"code":"import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport Node from '../core/Node.js';\nimport OperatorNode from '../math/OperatorNode.js';\nimport MaterialReferenceNode from './MaterialReferenceNode.js';\nclass MaterialNode extends Node {\n  constructor() {\n    let scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : MaterialNode.COLOR;\n    super();\n    this.scope = scope;\n  }\n  getNodeType(builder) {\n    const scope = this.scope;\n    const material = builder.context.material;\n    if (scope === MaterialNode.COLOR) {\n      return material.map !== null ? 'vec4' : 'vec3';\n    } else if (scope === MaterialNode.OPACITY) {\n      return 'float';\n    } else if (scope === MaterialNode.SPECULAR) {\n      return 'vec3';\n    } else if (scope === MaterialNode.ROUGHNESS || scope === MaterialNode.METALNESS) {\n      return 'float';\n    }\n  }\n  generate(builder, output) {\n    const material = builder.context.material;\n    const scope = this.scope;\n    let node = null;\n    if (scope === MaterialNode.ALPHA_TEST) {\n      node = new MaterialReferenceNode('alphaTest', 'float');\n    } else if (scope === MaterialNode.COLOR) {\n      const colorNode = new MaterialReferenceNode('color', 'color');\n      if (material.map !== null && material.map !== undefined && material.map.isTexture === true) {\n        node = new OperatorNode('*', colorNode, new MaterialReferenceNode('map', 'texture'));\n      } else {\n        node = colorNode;\n      }\n    } else if (scope === MaterialNode.OPACITY) {\n      const opacityNode = new MaterialReferenceNode('opacity', 'float');\n      if (material.alphaMap !== null && material.alphaMap !== undefined && material.alphaMap.isTexture === true) {\n        node = new OperatorNode('*', opacityNode, new MaterialReferenceNode('alphaMap', 'texture'));\n      } else {\n        node = opacityNode;\n      }\n    } else if (scope === MaterialNode.SPECULAR) {\n      const specularColorNode = new MaterialReferenceNode('specularColor', 'color');\n      if (material.specularColorMap !== null && material.specularColorMap !== undefined && material.specularColorMap.isTexture === true) {\n        node = new OperatorNode('*', specularColorNode, new MaterialReferenceNode('specularColorMap', 'texture'));\n      } else {\n        node = specularColorNode;\n      }\n    } else {\n      const outputType = this.getNodeType(builder);\n      node = new MaterialReferenceNode(scope, outputType);\n    }\n    return node.build(builder, output);\n  }\n}\n_defineProperty(MaterialNode, \"ALPHA_TEST\", 'alphaTest');\n_defineProperty(MaterialNode, \"COLOR\", 'color');\n_defineProperty(MaterialNode, \"OPACITY\", 'opacity');\n_defineProperty(MaterialNode, \"SPECULAR\", 'specular');\n_defineProperty(MaterialNode, \"ROUGHNESS\", 'roughness');\n_defineProperty(MaterialNode, \"METALNESS\", 'metalness');\nexport default MaterialNode;","map":{"version":3,"names":["_defineProperty","Node","OperatorNode","MaterialReferenceNode","MaterialNode","constructor","scope","COLOR","getNodeType","builder","material","context","map","OPACITY","SPECULAR","ROUGHNESS","METALNESS","generate","output","node","ALPHA_TEST","colorNode","undefined","isTexture","opacityNode","alphaMap","specularColorNode","specularColorMap","outputType","build"],"sources":["/Users/tumolabsstudent/Desktop/app/node_modules/three-stdlib/nodes/accessors/MaterialNode.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport Node from '../core/Node.js';\nimport OperatorNode from '../math/OperatorNode.js';\nimport MaterialReferenceNode from './MaterialReferenceNode.js';\n\nclass MaterialNode extends Node {\n  constructor(scope = MaterialNode.COLOR) {\n    super();\n    this.scope = scope;\n  }\n\n  getNodeType(builder) {\n    const scope = this.scope;\n    const material = builder.context.material;\n\n    if (scope === MaterialNode.COLOR) {\n      return material.map !== null ? 'vec4' : 'vec3';\n    } else if (scope === MaterialNode.OPACITY) {\n      return 'float';\n    } else if (scope === MaterialNode.SPECULAR) {\n      return 'vec3';\n    } else if (scope === MaterialNode.ROUGHNESS || scope === MaterialNode.METALNESS) {\n      return 'float';\n    }\n  }\n\n  generate(builder, output) {\n    const material = builder.context.material;\n    const scope = this.scope;\n    let node = null;\n\n    if (scope === MaterialNode.ALPHA_TEST) {\n      node = new MaterialReferenceNode('alphaTest', 'float');\n    } else if (scope === MaterialNode.COLOR) {\n      const colorNode = new MaterialReferenceNode('color', 'color');\n\n      if (material.map !== null && material.map !== undefined && material.map.isTexture === true) {\n        node = new OperatorNode('*', colorNode, new MaterialReferenceNode('map', 'texture'));\n      } else {\n        node = colorNode;\n      }\n    } else if (scope === MaterialNode.OPACITY) {\n      const opacityNode = new MaterialReferenceNode('opacity', 'float');\n\n      if (material.alphaMap !== null && material.alphaMap !== undefined && material.alphaMap.isTexture === true) {\n        node = new OperatorNode('*', opacityNode, new MaterialReferenceNode('alphaMap', 'texture'));\n      } else {\n        node = opacityNode;\n      }\n    } else if (scope === MaterialNode.SPECULAR) {\n      const specularColorNode = new MaterialReferenceNode('specularColor', 'color');\n\n      if (material.specularColorMap !== null && material.specularColorMap !== undefined && material.specularColorMap.isTexture === true) {\n        node = new OperatorNode('*', specularColorNode, new MaterialReferenceNode('specularColorMap', 'texture'));\n      } else {\n        node = specularColorNode;\n      }\n    } else {\n      const outputType = this.getNodeType(builder);\n      node = new MaterialReferenceNode(scope, outputType);\n    }\n\n    return node.build(builder, output);\n  }\n\n}\n\n_defineProperty(MaterialNode, \"ALPHA_TEST\", 'alphaTest');\n\n_defineProperty(MaterialNode, \"COLOR\", 'color');\n\n_defineProperty(MaterialNode, \"OPACITY\", 'opacity');\n\n_defineProperty(MaterialNode, \"SPECULAR\", 'specular');\n\n_defineProperty(MaterialNode, \"ROUGHNESS\", 'roughness');\n\n_defineProperty(MaterialNode, \"METALNESS\", 'metalness');\n\nexport default MaterialNode;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}