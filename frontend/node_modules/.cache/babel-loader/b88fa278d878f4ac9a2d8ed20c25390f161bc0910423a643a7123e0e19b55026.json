{"ast":null,"code":"/**\n * Focus shader\n * based on PaintEffect postprocess from ro.me\n * http://code.google.com/p/3-dreams-of-black/source/browse/deploy/js/effects/PaintEffect.js\n */\nconst FocusShader = {\n  uniforms: {\n    tDiffuse: {\n      value: null\n    },\n    screenWidth: {\n      value: 1024\n    },\n    screenHeight: {\n      value: 1024\n    },\n    sampleDistance: {\n      value: 0.94\n    },\n    waveFactor: {\n      value: 0.00125\n    }\n  },\n  vertexShader: ['varying vec2 vUv;', 'void main() {', '\tvUv = uv;', '\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );', '}'].join('\\n'),\n  fragmentShader: ['uniform float screenWidth;', 'uniform float screenHeight;', 'uniform float sampleDistance;', 'uniform float waveFactor;', 'uniform sampler2D tDiffuse;', 'varying vec2 vUv;', 'void main() {', '\tvec4 color, org, tmp, add;', '\tfloat sample_dist, f;', '\tvec2 vin;', '\tvec2 uv = vUv;', '\tadd = color = org = texture2D( tDiffuse, uv );', '\tvin = ( uv - vec2( 0.5 ) ) * vec2( 1.4 );', '\tsample_dist = dot( vin, vin ) * 2.0;', '\tf = ( waveFactor * 100.0 + sample_dist ) * sampleDistance * 4.0;', '\tvec2 sampleSize = vec2(  1.0 / screenWidth, 1.0 / screenHeight ) * vec2( f );', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.111964, 0.993712 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.846724, 0.532032 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.943883, -0.330279 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.330279, -0.943883 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.532032, -0.846724 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.993712, -0.111964 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.707107, 0.707107 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tcolor = color * vec4( 2.0 ) - ( add / vec4( 8.0 ) );', '\tcolor = color + ( add / vec4( 8.0 ) - color ) * ( vec4( 1.0 ) - vec4( sample_dist * 0.5 ) );', '\tgl_FragColor = vec4( color.rgb * color.rgb * vec3( 0.95 ) + color.rgb, 1.0 );', '}'].join('\\n')\n};\nexport { FocusShader };","map":{"version":3,"names":["FocusShader","uniforms","tDiffuse","value","screenWidth","screenHeight","sampleDistance","waveFactor","vertexShader","join","fragmentShader"],"sources":["/Users/tumolabsstudent/Desktop/app/node_modules/three-stdlib/shaders/FocusShader.js"],"sourcesContent":["/**\n * Focus shader\n * based on PaintEffect postprocess from ro.me\n * http://code.google.com/p/3-dreams-of-black/source/browse/deploy/js/effects/PaintEffect.js\n */\nconst FocusShader = {\n  uniforms: {\n    tDiffuse: {\n      value: null\n    },\n    screenWidth: {\n      value: 1024\n    },\n    screenHeight: {\n      value: 1024\n    },\n    sampleDistance: {\n      value: 0.94\n    },\n    waveFactor: {\n      value: 0.00125\n    }\n  },\n  vertexShader: ['varying vec2 vUv;', 'void main() {', '\tvUv = uv;', '\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );', '}'].join('\\n'),\n  fragmentShader: ['uniform float screenWidth;', 'uniform float screenHeight;', 'uniform float sampleDistance;', 'uniform float waveFactor;', 'uniform sampler2D tDiffuse;', 'varying vec2 vUv;', 'void main() {', '\tvec4 color, org, tmp, add;', '\tfloat sample_dist, f;', '\tvec2 vin;', '\tvec2 uv = vUv;', '\tadd = color = org = texture2D( tDiffuse, uv );', '\tvin = ( uv - vec2( 0.5 ) ) * vec2( 1.4 );', '\tsample_dist = dot( vin, vin ) * 2.0;', '\tf = ( waveFactor * 100.0 + sample_dist ) * sampleDistance * 4.0;', '\tvec2 sampleSize = vec2(  1.0 / screenWidth, 1.0 / screenHeight ) * vec2( f );', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.111964, 0.993712 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.846724, 0.532032 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.943883, -0.330279 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.330279, -0.943883 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.532032, -0.846724 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.993712, -0.111964 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.707107, 0.707107 ) * sampleSize );', '\tif( tmp.b < color.b ) color = tmp;', '\tcolor = color * vec4( 2.0 ) - ( add / vec4( 8.0 ) );', '\tcolor = color + ( add / vec4( 8.0 ) - color ) * ( vec4( 1.0 ) - vec4( sample_dist * 0.5 ) );', '\tgl_FragColor = vec4( color.rgb * color.rgb * vec3( 0.95 ) + color.rgb, 1.0 );', '}'].join('\\n')\n};\n\nexport { FocusShader };\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,MAAMA,WAAW,GAAG;EAClBC,QAAQ,EAAE;IACRC,QAAQ,EAAE;MACRC,KAAK,EAAE;IACT,CAAC;IACDC,WAAW,EAAE;MACXD,KAAK,EAAE;IACT,CAAC;IACDE,YAAY,EAAE;MACZF,KAAK,EAAE;IACT,CAAC;IACDG,cAAc,EAAE;MACdH,KAAK,EAAE;IACT,CAAC;IACDI,UAAU,EAAE;MACVJ,KAAK,EAAE;IACT;EACF,CAAC;EACDK,YAAY,EAAE,CAAC,mBAAmB,EAAE,eAAe,EAAE,YAAY,EAAE,4EAA4E,EAAE,GAAG,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;EAChKC,cAAc,EAAE,CAAC,4BAA4B,EAAE,6BAA6B,EAAE,+BAA+B,EAAE,2BAA2B,EAAE,6BAA6B,EAAE,mBAAmB,EAAE,eAAe,EAAE,6BAA6B,EAAE,wBAAwB,EAAE,YAAY,EAAE,iBAAiB,EAAE,iDAAiD,EAAE,4CAA4C,EAAE,uCAAuC,EAAE,mEAAmE,EAAE,gFAAgF,EAAE,oFAAoF,EAAE,qCAAqC,EAAE,oFAAoF,EAAE,qCAAqC,EAAE,qFAAqF,EAAE,qCAAqC,EAAE,qFAAqF,EAAE,qCAAqC,EAAE,sFAAsF,EAAE,qCAAqC,EAAE,sFAAsF,EAAE,qCAAqC,EAAE,qFAAqF,EAAE,qCAAqC,EAAE,uDAAuD,EAAE,+FAA+F,EAAE,gFAAgF,EAAE,GAAG,CAAC,CAACD,IAAI,CAAC,IAAI;AAC1rD,CAAC;AAED,SAAST,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}